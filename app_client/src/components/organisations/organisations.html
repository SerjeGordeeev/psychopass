<div class="organisations main_layout" ng-init="mayCRUD = orgs.checkCRUDRights()">
	<navigation></navigation>
	<div class="page_content">
		<span class="page_title">Организации</span>
		<tool-bar filters="orgs.filters"></tool-bar>

		<md-list-item ng-if="mayCRUD">
			<md-button class="md-raised  add" ng-click="orgs.add()" flex="80">
				<span>Добавить организацию</span>
			</md-button>
			<md-button class="md-raised  add" ng-click="orgs.import()" flex="20">
				<span>Импорт Excel</span>
			</md-button>
		</md-list-item>

		<md-card>
			<md-list class="layout-fill">
				<md-list-item class="md-2-line" ng-repeat="org in orgs.orgs | filter: orgs.psychoFilter | orderBy: 'name'">


					<md-input-container  md-no-float class="md-block" flex="40">
						<!--<label>Название организации</label>-->
						<input ng-disabled="!mayCRUD" placeholder="Название организации" ng-model="org.name" ng-blur="orgs.update(org)">
					</md-input-container>

					<md-input-container  md-no-float class="md-block" flex="40">
						<label>Тип организации</label>
						<md-select ng-model="org.is_psycho">
							<md-option ng-repeat="option in vm.filters[0].options | orderBy: 'name' " ng-value="org.is_psycho">
								{{option.name}}
							</md-option>
						</md-select>
					</md-input-container>

					<span flex></span>
					<md-button ng-if="mayCRUD" class="md-icon-button delete_button" aria-label="Удалить организацию" ng-click="orgs.remove(org._id)">
						<md-icon md-svg-icon="/src/img/ic_delete_forever_black_24px.svg"></md-icon>
					</md-button>
					<md-divider ng-if="!$last"></md-divider>
				</md-list-item>
			</md-list>
		</md-card>
	</div>
</div>
